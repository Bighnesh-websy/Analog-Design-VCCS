Version 4.1
SHEET 1 3080 680
WIRE 1360 -272 880 -272
WIRE 1840 -256 1776 -256
WIRE 2000 -256 1920 -256
WIRE 336 -240 256 -240
WIRE 336 -208 336 -240
WIRE 336 -112 336 -128
WIRE 560 -112 336 -112
WIRE 256 -80 256 -240
WIRE 352 -80 256 -80
WIRE 1168 -80 816 -80
WIRE 480 -64 272 -64
WIRE 352 -32 352 -80
WIRE 880 -32 880 -272
WIRE 880 -32 352 -32
WIRE 976 -32 880 -32
WIRE 1632 -32 1408 -32
WIRE 2000 -16 2000 -176
WIRE 976 16 976 -32
WIRE 352 32 352 -32
WIRE 816 32 816 -80
WIRE 944 32 816 32
WIRE 1632 32 1632 -32
WIRE 272 48 272 -64
WIRE 320 48 272 48
WIRE 1168 48 1168 -80
WIRE 1168 48 1008 48
WIRE 1264 48 1168 48
WIRE 1600 48 1264 48
WIRE 480 64 480 -64
WIRE 480 64 384 64
WIRE 944 64 480 64
WIRE 1808 64 1664 64
WIRE 1952 64 1888 64
WIRE -48 80 -304 80
WIRE 80 80 32 80
WIRE 128 80 80 80
WIRE 272 80 208 80
WIRE 320 80 272 80
WIRE 1600 80 1456 80
WIRE -304 112 -304 80
WIRE 352 128 352 96
WIRE 976 128 976 80
WIRE 976 128 352 128
WIRE 80 144 80 80
WIRE 272 144 272 80
WIRE 1360 144 1360 -272
WIRE 1632 144 1632 96
WIRE 1632 144 1360 144
WIRE -304 176 -304 112
WIRE 976 192 976 128
WIRE 1408 192 1408 -32
WIRE 1408 192 976 192
WIRE 1456 192 1456 80
WIRE 2000 192 2000 80
WIRE 2000 192 1456 192
WIRE 272 224 272 208
WIRE 352 224 352 128
WIRE 352 224 272 224
WIRE 560 224 560 -112
WIRE 560 224 352 224
WIRE 272 240 272 224
WIRE 2000 272 2000 192
WIRE -304 288 -304 256
WIRE 80 336 80 208
WIRE 480 336 480 64
WIRE 480 336 80 336
WIRE 1776 352 1776 -256
WIRE 2000 352 1776 352
WIRE 2000 384 2000 352
FLAG 272 240 0
FLAG -304 288 0
FLAG 1264 48 Vctrl
IOPIN 1264 48 Out
FLAG -304 112 Vin
IOPIN -304 112 In
FLAG 2000 384 0
SYMBOL res 48 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10K
SYMBOL res 224 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10K
SYMBOL cap 64 144 R0
SYMATTR InstName C1
SYMATTR Value 0.82µ
SYMATTR SpiceLine V=4 Irms=4.7 Rser=0.0203382 Lser=0 mfg="KEMET" pn="C0603C824K7PAC" type="X5R"
SYMBOL cap 256 144 R0
SYMATTR InstName C2
SYMATTR Value 0.82µ
SYMBOL OpAmps\\UniversalOpAmp2 352 64 R0
SYMATTR InstName U1
SYMBOL voltage 336 -224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsup1
SYMATTR Value 15
SYMBOL voltage -304 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vin
SYMATTR Value PULSE(0 5 0 1u 1u 5m 5m)
SYMBOL OpAmps\\UniversalOpAmp2 976 48 R0
SYMATTR InstName U2
SYMBOL OpAmps\\UniversalOpAmp2 1632 64 M180
SYMATTR InstName U3
SYMBOL res 1984 -272 R0
SYMATTR InstName Rload
SYMATTR Value 10K
SYMBOL res 1984 256 R0
SYMATTR InstName Rsense
SYMATTR Value 1K
SYMBOL nmos 1952 -16 R0
SYMATTR InstName M1
SYMATTR Value NMOSTEST
SYMBOL voltage 1936 -256 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Vsup2
SYMATTR Value 60
SYMBOL res 1904 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rgate
SYMATTR Value 47
TEXT -384 344 Left 2 !.tran 1
TEXT -424 -312 Left 2 ;Butterworth Salen Key low pass filter
TEXT 1752 440 Left 2 !.meas tran Iavg AVG I(Rsense) FROM=0.1 TO=0.2\n.meas tran Imax MAX I(Rsense) FROM=0.1 TO=0.2\n.meas tran Imin MIN I(Rsense) FROM=0.1 TO=0.2\n.meas tran Ipp PARAM 'Imax - Imin'\n.meas tran Irms RMS I(Rsense) FROM=0.1 TO=0.2\n.meas tran Vavg AVG V(Vctrl) FROM=0.1 TO=0.2
TEXT 1104 392 Left 2 !.model NMOSTEST NMOS (VTO=1.5 KP=1e-2 LAMBDA=0)
TEXT 1088 -376 Left 2 ;opamp+MOSFET current sink
RECTANGLE Normal 1040 512 -464 -288 2
RECTANGLE Normal 2224 416 1056 -352 2
